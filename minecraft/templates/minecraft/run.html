{% extends "base.html" %}

{% load crispy_forms_tags %}
{% load static %}

{% block content %}
  <script>
    // We define the image source, and restart button, here as the URLs are going to be generated by Django template
    image_scr = "{% static request.path %}/{{ room_name }}/step.jpg";
    restart_button = '<a href="/{{ app_folder }}/run" class="btn btn-info"><i class="bi bi-bootstrap-reboot"></i> Restart</a>';

    ws_setting = "{{ ws_setting }}";
    prompt = "{{ initial_prompt }}";
  </script>
  <script src="{% static app_folder %}/js/script.js"></script>

  <section class="text-center">
    <div class="container">
      <br>
      <h2 class="text-start"><a href="/{{ app_folder }}/config" class="btn btn-info"><i class="bi bi-arrow-left"></i> Config</a></h2>
      <h1>{{ app_name }} - room <i>{{ room_name }}</i></h1>
      <h2 id="sub-title">Step 0</h2>
    </div>
  </section>

  <br>
  <div class="container">
    <div id="loading_div" class="d-flex align-items-center">
      <strong>Your game is loading...</strong> &nbsp;&nbsp;&nbsp;
      <div class="spinner-border ml-auto" role="status" aria-hidden="true"></div>
    </div>

    <img id="image" style="visibility: hidden;" class="img-fluid rounded mx-auto d-block img-thumbnail" src="{% static request.path %}/{{ room_name }}/step.jpg">
    <br>
    <div class="row justify-content-center">
      <div class="col-4">
        {{ form|crispy }}      
        <button class="btn btn-primary" onclick="updatePrompt()">Update goal</button>
      </div>
    </div>
  </div>
{% endblock %}